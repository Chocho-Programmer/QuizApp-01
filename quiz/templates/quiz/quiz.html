{% extends 'quiz/main.html' %} 
{% load static %} 

{% block content %} 
    <div id="quiz-page">

        <div>{{score}}</div>
        {% for info in data %}
        <div class="quiz-title">
            <h2 class="name">Quiz</h2>
            <h3 class="type">
                <span class="level">{{info.level}}l</span> > <span class="course">{{info.course}}</span>
            </h3>
        </div>

        <div class="quiz">            
            <form class="main-quiz" action="{% url 'quiz' %}" method="POST">
                {% csrf_token %}
                <div class="question">
                    <span class="name" id="question">{{info.id}}. {{info.question}}</span>
                </div>
                <ul class="options">
                    <li class="option-btn">
                        <input type="radio" name="option" id="option-a" value="a" class="index">
                        <label class="option" for="option-a">A. {{info.optionA}}</label>
                    </li>
                    <li class="option-btn">
                        <input type="radio" name="option" id="option-a" value="b" class="index">
                        <label class="option" for="option-b">B. {{info.optionB}}</label>
                    </li>
                    <li class="option-btn">
                        <input type="radio" name="option" id="option-a" value="c" class="index">
                        <label class="option" for="option-c">C. {{info.optionC}}</label>
                    </li>
                    <li class="option-btn">
                        <input type="radio" name="option" id="option-a" value="d" class="index">
                        <label class="option" for="option-d">D. {{info.optionD}}</label>
                    </li>
                    <div id="score"></div>
                </ul>
                
                {% if data.has_next %}
                <a href="?page={{data.next_page_number}}" class="next-btn" id="next-btn"><button type="submit">NEXT</button></a>
                {% else %}
                <button type="submit" class="next-btn" id="submit-btn">SUBMIT</button>
                {% endif %}
                
            </form>


            <div class="workings">
                <a href="#!" class="link" id="working-link">View workings</a>
                <div class="main-working" id="main-working">
                    <a href="#!" class="link">...by CHOCHO</a>
                    <h3>Workings: </h3>
                    <p class="name">
                        {{info.workings}}
                    </p>
                </div>
            </div>

            <ul class="quiz-nav">
                {% if data.has_previous %}
                <li class="btn prev-btn">
                    <a href="?page={{data.previous_page_number}}">&laquo;</i></a>
                </li>
                {% else %}
                <li class="btn prev-btn disabled">
                    <a href="#!">&laquo;</i></a>
                </li>
                {% endif %}


                <!-- FOR LIST OF CLICKABLE QUESTIONS -->
                {% for i in data.paginator.page_range %}
                    {% if data.number == i %}
                    <li class="btn current">
                        <a href="#!" class="name">{{i}}</i></a>
                    </li>
                    {% else %}
                    <li class="btn">
                        <a href="?page={{i}}" class="name">{{i}}</i></a>
                    </li>
                    {% endif %}
                {% endfor %}

                {% if data.has_next %}
                <li class="btn skip-btn">
                    <a href="?page={{data.next_page_number}}">&raquo;</i></a>
                </li>
                {% else %}
                <li class="btn skip-btn disabled">
                    <a href="#!">&raquo;</i></a>
                </li>
                {% endif %}
            </ul>
            {% endfor %}
        </div>
    </div>

    <script>
        let workingLink = document.getElementById('working-link')
        let working = document.getElementById('main-working')

        workingLink.addEventListener('click', function(){
            working.classList.toggle('main-working-show')
            workingLink.classList.toggle('link-active')
        })

        // let database = [
        //     {
        //         question: '5log 10 + 10log 10 is a factor of 50, find the other factor.',
        //         options: {
        //             a: '5',
        //             b: '10',
        //             c: '50',
        //             d: '15'
        //         },
        //         answer: 'b'
        //     },
        //     {
        //         question: 'What is the range of the following numbers {2, 4, 3, 2, 6, 5, 9, 0}',
        //         options: {
        //             a: '5',
        //             b: '10',
        //             c: '0',
        //             d: '9'
        //         },
        //         answer: 'd'
        //     },
        //     {
        //         question: 'Find the median of the following set of numbers {2, 4, 3, 2, 6, 5, 9, 0, 1}',
        //         options: {
        //             a: '5',
        //             b: '0',
        //             c: '4',
        //             d: '6'
        //         },
        //         answer: 'c'
        //     },
        //     {
        //         question: 'If s = at + ½at², make a the subject of formula ',
        //         options: {
        //             a: 'a = s/(t² - at²)',
        //             b: 'a = s/(t² + ½at²)',
        //             c: 'a = s/(t + ½t²)',
        //             d: 'a = s/(t + ½at)'
        //         },
        //         answer: 'c'
        //     },
        //     {
        //         question: 'A cuboid of width, length and height of 4cm, 5cm and 4cm respectively has a volume of .............',
        //         options: {
        //             a: '50',
        //             b: '80',
        //             c: '100',
        //             d: '15'
        //         },
        //         answer: 'b'
        //     }
        // ]

        // let question = document.getElementById('question')
        // let index = document.getElementById('index')

        // let optA = document.getElementById('option-a')
        // let optB = document.getElementById('option-b')
        // let optC = document.getElementById('option-c')
        // let optD = document.getElementById('option-d')

        // let nextBtn = document.getElementById('next-btn')

        
        // for (let i = 0; i <= database.length; i++){
        //     question.innerHTML = database[i].question
        //     index.innerHTML = String(i + 1)

        //     optA.innerHTML = database[i].options.a
        //     optB.innerHTML = database[i].options.b
        //     optC.innerHTML = database[i].options.c
        //     optD.innerHTML = database[i].options.d

        // }
        
        // nextBtn.addEventListener('click', function(){
        //     i + 1
        // })

        // function nextQuestion() {
        //     i + 1;
        //     console.log('works!!!')
        //     console.log('i', i)
        // }

    </script>
{% endblock %}